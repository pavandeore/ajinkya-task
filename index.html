<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Typing Speed Test </title>
   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <!-- Font Awesome -->
<!--   <link rel="stylesheet" href="https://myskilltests.com/public/admin-assets/bower_components/font-awesome/css/font-awesome.min.css"> -->
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://myskilltests.com/public/admin-assets/bower_components/Ionicons/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="https://myskilltests.com/public/admin-assets/dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. We have chosen the skin-blue for this starter
        page. However, you can choose any other skin. Make sure you
        apply the skin class to the body tag so the changes take effect. -->
  <link rel="stylesheet" href="https://myskilltests.com/public/admin-assets/dist/css/skins/skin-blue.min.css">
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">

    <link rel="stylesheet" href="https://myskilltests.com/public/admin-assets/bower_components/select2/dist/css/select2.min.css">
    <link rel="stylesheet" href="https://myskilltests.com/public/css/jquery.toast.min.css">
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://myskilltests.com/public/css/admin-style.css">

</head>
<style>
  body {
/*  background-color:#F2F8FF;*/
  color: black;
  text-align: center;
}

.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  column-gap: 120px;
}

.heading {
  margin-bottom: 20px;
  font-size: 3rem;
  color: black;
}

.header {
  display: flex;
  align-items: center;
}

.timer, .errors,
.accuracy, .cpm, .wpm {
  background-color: #cce3ff;
/*  color: white;*/
  height: 100px;
  width: 160px;
  margin: 8px;
  padding: 12px;
  border-radius: 20%;

  display: none;
}

.cpm, .wpm  {
  display: none;
}

.header_text {
  text-transform: uppercase;
  font-size: 0.9rem;
  font-weight: 600;
}

.curr_time, .curr_errors,
.curr_accuracy, .curr_cpm,
.curr_wpm {
  font-size: 2.5rem;
}

.quote {
margin:50px;
  background-color: white;
  color: black;
  border-style: solid black 2px;
  font-size: 1.5rem;
 box-shadow: black 5px 8px 5px;
  padding: 20px;
  
  width: 100%;
  height: 50px%;
border:solid black;

-webkit-user-select: none;

-moz-user-select: none;
-ms-user-select: none;
-o-user-select: none;
user-select: none;
}


.input_area {
  display: none;
  background-color:white;
  height: 150px;
  width: 85%;
  font-size: 1.5rem;
  font-weight: 600;
  margin-top: 50px;
  margin-bottom: 50px;
  padding: 20px;
  border: solid black;
  box-shadow: black 5px 8px 5px;
}
.buttons{
  display: inline-flex;
  gap : 12px;
  border-radius: 500px;
}

.incorrect_char {
  color: red;
  text-decoration: underline;
}

.correct_char {
  color: darkgreen;
}
.restart_btn{
  display: none;
      background-color: #007bff;
    object-position: fixed;
  color: white;
  font-size: 1.5rem;
  padding: 10px;
  border: 0px;
  
}

.submit_btn {
  
  background-color: #007bff;
  color: white;
  font-size: 1.5rem;
  padding: 10px;
  border: 0px;
box-shadow: black 5px 8px 5px;
}
.start_btn {
background-color: #007bff;
color: white;
  font-size: 1.5rem;
  padding: 10px;
  border: 0px;
box-shadow: black 5px 8px 5px;
}
.cancel_btn {
  display: none;
background-color: #007bff;
color: white;
  font-size: 1.5rem;
  padding: 10px;
  border: 0px;
 box-shadow: black 5px 8px 5px;
}
</style>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <a class="navbar-brand" href="http://myskilltests.com">My Skill Tests</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarColor01">
    <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                <a class="nav-link" href="">All Courses </a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="">My Profile</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="">Logout</a>
            </li>
            </ul>
    
  </div>
</nav>
 <section class="content container">

      




<section class="content">
  <div class="container">
    <div class="heading">Typing Speed Test</div>
    <div class="header">
      <div class="wpm">
        <div class="header_text">WPM</div>
        <div class="curr_wpm">100</div>
      </div>
     <!--  <div class="cpm">
        <div class="header_text">CPM</div>
        <div class="curr_cpm">100</div>
      </div> -->
      <div class="errors">
        <div class="header_text">Errors</div>
        <div class="curr_errors">0</div>
      </div>
      <div class="timer">
        <div class="header_text">Time</div>
        <div class="curr_time">0s</div>
      </div>
      <div class="accuracy">
        <div class="header_text">% Accuracy</div>
        <div class="curr_accuracy">100</div>
      </div>
    </div>

    <div class="quote" id="quote">Click on Start button to start the game.</div>
    <textarea class="input_area" placeholder="start typing here..." oninput="processCurrentText()"
      ></textarea>
   
  </div>
<br>
<br>

  

    <div class="buttons">
     <button class="start_btn" onclick="startGame()">Start</button>
      <button class="submit_btn d-none" onclick="finishGame()" >Submit</button>
      <button class="restart_btn" onclick="resetValues()">Reset</button>
      <button class="cancel_btn" onclick="cancelgame()">Start test Again</button>
    </div>















</section>


    </section>
    <!-- /.content -->
  </div>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script >
    let TIME_LIMIT =1000;

// define quotes to be used
let quotes_array = [
  "Opera refers to a dramatic art form, originating in Europe, in which the emotional content is conveyed to the audience as much through music, both vocal and instrumental, as it is through the lyrics. By contrast, in musical theater an actor's dramatic performance is primary, and the music plays a lesser role.",
  "Sixty years ago, on the evening of August 14, 1947, a few hours before Britain’s Indian Empire was formally divided into the nation-states of India and Pakistan, Lord Louis Mountbatten and his wife, Edwina, sat down in the viceregal mansion in New Delhi to watch the latest Bob Hope movie, “My Favorite Brunette.",
  "Mountbatten, the last viceroy of India, had arrived in New Delhi in March 1947, charged with an almost impossible task. Irrevocably enfeebled by the Second World War, the British belatedly realized that they had to leave the subcontinent.",
  "But sectarian riots in Punjab and Bengal dimmed hopes for a quick and dignified British withdrawal and boded ill for India’s assumption of power. Not surprisingly, there were some notable absences at the Independence Day celebrations in New Delhi on August 15th. ",
  "Posterity has enshrined this speech, as Nehru clearly intended. But today his quaint phrase “tryst with destiny” resonates ominously, so enduring has been the political and psychological scars of partition.",
  "Many of the seeds of postcolonial disorder in South Asia were sown much earlier, in two centuries of direct and indirect British rule, but, a book, after the book has demonstrated, nothing in the complex tragedy of partition was inevitable. "
];

// selecting required elements
let timer_text = document.querySelector(".curr_time");
let accuracy_text = document.querySelector(".curr_accuracy");
let error_text = document.querySelector(".curr_errors");
let cpm_text = document.querySelector(".curr_cpm");
let wpm_text = document.querySelector(".curr_wpm");
let quote_text = document.querySelector(".quote");
let input_area = document.querySelector(".input_area");
let restart_btn = document.querySelector(".restart_btn");
let cpm_group = document.querySelector(".cpm");
let wpm_group = document.querySelector(".wpm");
let error_group = document.querySelector(".errors");
let accuracy_group = document.querySelector(".accuracy");
let start_btn = document.querySelector(".start_btn");
let text_area = document.querySelector(".textarea");
let submit_btn = document.querySelector(".submit_btn");
let cancel_btn = document.querySelector(".cancel_btn");
let timer_group = document.querySelector(".timer");
let timeLeft = TIME_LIMIT;
let timeElapsed = 0;
let total_errors = 0;
let errors = 0;
let accuracy = 0;
let characterTyped = 0;
let current_quote = "";
let quoteNo = 0;
let timer = null;

function updateQuote() {
  quote_text.textContent = null;
  current_quote = quotes_array[quoteNo];

  // separate each character and make an element 
  // out of each of them to individually style them
  current_quote.split('').forEach(char => {
    const charSpan = document.createElement('span')
    charSpan.innerText = char
    quote_text.appendChild(charSpan)
  })

  // roll over to the first quote
  if (quoteNo < quotes_array.length - 1)
    quoteNo++;
  else
    quoteNo = 0;

}


function processCurrentText() {

  // get current input text and split it
  curr_input = input_area.value;
  curr_input_array = curr_input.split('');

  // increment total characters typed
  characterTyped++;

  errors = 0;

  quoteSpanArray = quote_text.querySelectorAll('span');
  quoteSpanArray.forEach((char, index) => {
    let typedChar = curr_input_array[index]

    // characters not currently typed
    if (typedChar == null) {
      char.classList.remove('correct_char');
      char.classList.remove('incorrect_char');

      // correct characters
    } else if (typedChar === char.innerText) {
      char.classList.add('correct_char');
      char.classList.remove('incorrect_char');

      // incorrect characters
    } else {
      char.classList.add('incorrect_char');
      char.classList.remove('correct_char');

      // increment number of errors
      errors++;
    }
  });

  // display the number of errors
  error_text.textContent = total_errors + errors;

  // update accuracy text
  let correctCharacters = (characterTyped - (total_errors + errors));
  let accuracyVal = ((correctCharacters / characterTyped) * 100);
  accuracy_text.textContent = Math.round(accuracyVal);

  // if current text is completely typed
  // irrespective of errors
  if (curr_input.length == current_quote.length) {
    updateQuote();

    // update total errors
    total_errors += errors;

    // clear the input area
    input_area.value = "";
  }
}

function updateTimer() {
  if (timeLeft > 0) {
    // decrease the current time left
    timeLeft--;

    // increase the time elapsed
    timeElapsed++;

    // update the timer text
    timer_text.textContent =timeElapsed + "s";
  }
  else {
    // finish the game
    finishGame();
  }
}

function finishGame() {
  // stop the timer
  clearInterval(timer);

  // disable the input area
  input_area.style.display = "none";

  // show finishing text
  quote_text.textContent = "Click on Start test again to start the test again.";

  $('.submit_btn').removeClass('d-block');
   $('.submit_btn').addClass('d-none');
   
  // display restart button
  restart_btn.style.display = "none";
  // submit_btn.style.display = "none";
   // submit_btn.style.display = "none";
/*   text_area.style.display = "none";
*/   
  // calculate cpm and wpm
/*  cpm = Math.round(((characterTyped / timeElapsed) * 60));*/
  wpm = Math.round((((characterTyped / 5) / timeElapsed) * 60));

  // update cpm and wpm text
 /* cpm_text.textContent = cpm;*/
  wpm_text.textContent = wpm;

  // display the cpm and wpm
 /* cpm_group.style.display = "block";*/
  wpm_group.style.display = "block";
  accuracy_group.style.display="block";
  timer_group.style.display="block";
  error_group.style.display="block";
  cancel_btn.style.display = "block";
  quote_text.style.display = "none";

}


function startGame() {
  $('.submit_btn').removeClass('d-none');
  $('.submit_btn').addClass('d-block');
  resetValues();
  updateQuote();

  // clear old and start a new timer
  clearInterval(timer);
  timer = setInterval(updateTimer, 1000);
  restart_btn.style.display = "none";
  input_area.style.display = "block";


}

function resetValues() {
  timeLeft = TIME_LIMIT;
  timeElapsed = 0;
  errors = 0;
  total_errors = 0;
  accuracy = 0;
  characterTyped = 0;
  quoteNo = 0;
/*  input_area.disabled = false;*/

  input_area.value = "";
  /*quote_text.textContent = 'Click on the area below to start the game.';*/
  accuracy_text.textContent = 100;
  timer_text.textContent = 0+ 's';
  error_text.textContent = 0;
  restart_btn.style.display = "none";
 /* cpm_group.style.display = "none";*/
  wpm_group.style.display = "none";

 start_btn.style.display = "none";
   updateQuote();

}
function cancelgame()
{
  location.reload();
}

  </script>

</body>
</html>